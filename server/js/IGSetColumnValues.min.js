window.mho=window.mho||{},function(t){function e(t){this.ig$=t.ig$,this.grid=t.grid,this.model=this.grid.model,this.da=t.options,this.type=t.type,this.ajaxIdentifier=t.ajaxIdentifier,this.itemsToSubmit=t.itemsToSubmit,this.staticValue=t.staticValue,this.jsExpression=t.jsExpression,this.recordSelection=t.recordSelection,this.columnConfig=this.ig$.interactiveGrid("option","config.columns"),this.affectedColumns=t.affectedColumns,this.updateMethods={static:this.updateWithStaticValue,js:this.updateWithJavaScriptExpressionValues,sql:this.ajaxCallback,plsql:this.ajaxCallback,function:this.ajaxCallback},this.setRecords(),this.data=this.getCurrentData()}function i(t,e){return _ajaxCallback(t.ajaxIdentifier,t.type,t.pageItemsToSubmit,t.ig$,e)}function a(t,e){return _ajaxCallback(t.ajaxIdentifier,t.type,t.pageItemsToSubmit,t.ig$,e)}function n(t,e){return t.staticValue=t.da,_getStaticValue(t,e)}function s(t){let e=apex.region(t),i=e.widget(),a=$.Deferred();return i.length>0?a.resolve(i):e.element.on("interactivegridcreate",function(){a.resolve(e.widget())}),a.promise()}function r(t){let i;s($(t.da.triggeringElement).attr("id")).done(function(i){t.ig$=i;let a=i.interactiveGrid("getViews").grid;if(!a)return;let n=t.affectedColumns.split(","),s=new e({ig$:i,grid:a,da:t.da,type:t.type,ajaxIdentifier:t.ajaxIdentifier,itemsToSubmit:t.itemsToSubmit,staticValue:t.staticValue,jsExpression:t.jsExpression,recordSelection:t.recordSelection,affectedColumns:n});s.getValues().then(function(){s.setValues()})})}e.prototype.setRecords=function(){let t=this,e={selected:function(){return t.ig$.interactiveGrid("getSelectedRecords")},all:function(e){let i=[];return t.model.forEach(function(t){i.push(t)}),i}};this.records=e[this.recordSelection].apply(this)},e.prototype.getValues=function(){return this.updateMethods[this.type].apply(this)},e.prototype.setValues=function(){let t=this;t.records.forEach(function(e,i){t.data[i].forEach(function(i){i.isAffected&&t.model.setValue(e,i.name,i.value)})})},e.prototype.getCurrentData=function(){let t=this;return this.records.map(function(e){return t.columnConfig.map(function(i){return{name:i.name,value:t.model.getValue(e,i.name),dataType:i.dataType,formatMask:i.appearance.formatMask,isReadOnly:i.isReadOnly,isAffected:t.affectedColumns.indexOf(i.name)>-1}})})},e.prototype.ajaxCallback=function(){let t=this,e=$.Deferred();return apex.server.plugin(this.ajaxIdentifier,{x01:this.type,p_clob_01:JSON.stringify(this.data),pageItems:this.itemsToSubmit}).then(function(i){t.data=i,e.resolve()}),e.promise()},e.prototype.updateWithStaticValue=function(){let t=this,e=$.Deferred();return this.data=this.data.map(function(e){return e.map(function(e){return e.isAffected&&(e.value=t.staticValue),e})}),e.resolve(),e.promise()},e.prototype.updateWithJavaScriptExpressionValues=function(){let t=this,e=$.Deferred(),i={};return this.data=this.data.map(function(e){return i={},e.forEach(function(t){i[t.name]=t.value}),e.map(function(e){return e.isAffected&&(e.value=t.jsExpression.call(i)),e})}),e.resolve(),e.promise()},t.IGSetColumnValues={setValue:r}}(window.mho);